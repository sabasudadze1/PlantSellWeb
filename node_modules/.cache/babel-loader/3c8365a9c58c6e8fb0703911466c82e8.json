{"ast":null,"code":"import _objectSpread from \"C:/Users/Saba/Desktop/PlantsWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"C:/Users/Saba/Desktop/PlantsWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/Saba/Desktop/PlantsWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/Saba/Desktop/PlantsWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/Saba/Desktop/PlantsWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\Saba\\\\Desktop\\\\PlantsWeb\\\\src\\\\router.js\";\nimport React, { Component } from \"react\";\nimport { Switch, Route, Link, Router } from \"react-router-dom\";\nimport Home from \"./pages/home/Home\";\nimport Login from \"./pages/login/login\";\nimport Signup from \"./pages/signup/signup\";\nimport Cart from \"./pages/cart/Cart\";\nimport NotFound from \"./pages/notFound\";\nimport { PrivateRoute } from \"./components/privateRoute\";\nimport history from \"./utils/helpers/history\";\nimport data from \"./Data\";\nimport Context from \"./Context\";\n\nvar RouterComponent = /*#__PURE__*/function (_Component) {\n  _inherits(RouterComponent, _Component);\n\n  var _super = _createSuper(RouterComponent);\n\n  function RouterComponent(props) {\n    var _this;\n\n    _classCallCheck(this, RouterComponent);\n\n    _this = _super.call(this, props);\n\n    _this.addToCart = function (cartItem) {\n      var cart = _this.state.cart;\n\n      if (cart[cartItem.id]) {\n        cart[cartItem.id].amount += cartItem.amount;\n      } else {\n        cart[cartItem.id] = cartItem;\n      }\n\n      if (cart[cartItem.id].amount > cart[cartItem.id].product.stock) {\n        cart[cartItem.id].amount = cart[cartItem.id].product.stock;\n      }\n\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n\n      _this.setState({\n        cart\n      });\n    };\n\n    _this.checkout = function () {\n      alert(\"აი მოგიტანთ სახლში ახლავე\");\n      var cart = _this.state.cart;\n\n      var products = _this.state.products.map(function (p) {\n        if (cart[p.name]) {\n          p.stock = p.stock - cart[p.name].amount;\n        }\n\n        return p;\n      });\n\n      _this.setState({\n        products\n      });\n\n      _this.clearCart();\n    };\n\n    _this.removeFromCart = function (cartItemId) {\n      var cart = _this.state.cart;\n      delete cart[cartItemId];\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n\n      _this.setState({\n        cart\n      });\n    };\n\n    _this.clearCart = function () {\n      var cart = {};\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n\n      _this.setState({\n        cart\n      });\n    };\n\n    _this.state = {\n      cart: {},\n      products: []\n    };\n    _this.routerRef = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n\n  _createClass(RouterComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var products = localStorage.getItem(\"products\");\n      var cart = localStorage.getItem(\"cart\");\n      products = products ? JSON.parse(products) : data.initProducts;\n      cart = cart ? JSON.parse(cart) : {};\n      this.setState({\n        products,\n        cart\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Context.Provider, {\n        value: _objectSpread(_objectSpread({}, this.state), {}, {\n          removeFromCart: this.removeFromCart,\n          addToCart: this.addToCart,\n          clearCart: this.clearCart,\n          checkout: this.checkout\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Router, {\n        history: history,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(PrivateRoute, {\n        path: \"/\",\n        exact: true,\n        component: Home,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/login\",\n        exact: true,\n        component: Login,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/signup\",\n        exact: true,\n        component: Signup,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/cart\",\n        exact: true,\n        component: Cart,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"*\",\n        component: NotFound,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }\n      }))));\n    }\n  }]);\n\n  return RouterComponent;\n}(Component);\n\nexport { RouterComponent as default };","map":{"version":3,"sources":["C:/Users/Saba/Desktop/PlantsWeb/src/router.js"],"names":["React","Component","Switch","Route","Link","Router","Home","Login","Signup","Cart","NotFound","PrivateRoute","history","data","Context","RouterComponent","props","addToCart","cartItem","cart","state","id","amount","product","stock","localStorage","setItem","JSON","stringify","setState","checkout","alert","products","map","p","name","clearCart","removeFromCart","cartItemId","routerRef","createRef","getItem","parse","initProducts"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Switch, Route, Link, Router } from \"react-router-dom\";\nimport Home from \"./pages/home/Home\";\nimport Login from \"./pages/login/login\";\nimport Signup from \"./pages/signup/signup\";\nimport Cart from \"./pages/cart/Cart\"\nimport NotFound from \"./pages/notFound\";\nimport { PrivateRoute } from \"./components/privateRoute\";\nimport history from \"./utils/helpers/history\";\n\n\nimport data from \"./Data\";\nimport Context from \"./Context\";\n\n\nexport default class RouterComponent extends Component {\n      constructor(props) {\n        super(props);\n        this.state = {\n          cart: {},\n          products: []\n        };\n  \n        this.routerRef = React.createRef();\n      }\n    \n      addToCart = cartItem => {\n        let cart = this.state.cart;\n        if (cart[cartItem.id]) {\n          cart[cartItem.id].amount += cartItem.amount;\n        } else {\n          cart[cartItem.id] = cartItem;\n        }\n        if (cart[cartItem.id].amount > cart[cartItem.id].product.stock) {\n          cart[cartItem.id].amount = cart[cartItem.id].product.stock;\n        }\n        localStorage.setItem(\"cart\", JSON.stringify(cart));\n        this.setState({ cart });\n      };\n    \n      checkout = () => {\n        alert(\"აი მოგიტანთ სახლში ახლავე\")\n        const cart = this.state.cart;\n        const products = this.state.products.map(p => {\n          if (cart[p.name]) {\n            p.stock = p.stock - cart[p.name].amount;\n          }\n          return p;\n        });\n        this.setState({ products });\n        this.clearCart();\n      };\n    \n      removeFromCart = cartItemId => {\n        let cart = this.state.cart;\n        delete cart[cartItemId];\n        localStorage.setItem(\"cart\", JSON.stringify(cart));\n        this.setState({ cart });\n      };\n    \n      clearCart = () => {\n        let cart = {};\n        localStorage.setItem(\"cart\", JSON.stringify(cart));\n        this.setState({ cart });\n      };\n    \n      componentDidMount() {\n        let products = localStorage.getItem(\"products\");\n        let cart = localStorage.getItem(\"cart\");\n        products = products ? JSON.parse(products) : data.initProducts;\n        cart = cart ? JSON.parse(cart) : {};\n        this.setState({ products, cart });\n      }\n    \n      render() {\n        return (\n          <Context.Provider\n            value={{\n              ...this.state,\n              removeFromCart: this.removeFromCart,\n              addToCart: this.addToCart,\n              clearCart: this.clearCart,\n              checkout: this.checkout\n            }}\n          >\n            <Router history={history}>\n              <Switch>\n                <PrivateRoute path=\"/\" exact component={Home} />\n                <Route path=\"/login\" exact component={Login} />\n                <Route path=\"/signup\" exact component={Signup} />\n                <Route path=\"/cart\" exact component={Cart} />\n                <Route path=\"*\" component={NotFound} />\n              </Switch>\n            </Router>\n      </Context.Provider>\n  );\n};\n}"]},"metadata":{},"sourceType":"module"}