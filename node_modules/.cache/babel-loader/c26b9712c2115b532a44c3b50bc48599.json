{"ast":null,"code":"import _objectSpread from\"C:/Users/Saba/Desktop/PlantsWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Users/Saba/Desktop/PlantsWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Saba/Desktop/PlantsWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Saba/Desktop/PlantsWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Saba/Desktop/PlantsWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Switch,Route,Link,Router}from\"react-router-dom\";import Home from\"./pages/home/Home\";import Login from\"./pages/login/login\";import Signup from\"./pages/signup/signup\";import Cart from\"./pages/cart/Cart\";import NotFound from\"./pages/notFound\";import{PrivateRoute}from\"./components/privateRoute\";import history from\"./utils/helpers/history\";import data from\"./Data\";import Context from\"./Context\";var RouterComponent=/*#__PURE__*/function(_Component){_inherits(RouterComponent,_Component);var _super=_createSuper(RouterComponent);function RouterComponent(props){var _this;_classCallCheck(this,RouterComponent);_this=_super.call(this,props);_this.addToCart=function(cartItem){var cart=_this.state.cart;if(cart[cartItem.id]){cart[cartItem.id].amount+=cartItem.amount;}else{cart[cartItem.id]=cartItem;}if(cart[cartItem.id].amount>cart[cartItem.id].product.stock){cart[cartItem.id].amount=cart[cartItem.id].product.stock;}localStorage.setItem(\"cart\",JSON.stringify(cart));_this.setState({cart});};_this.checkout=function(){alert(\"აი მოგიტანთ სახლში ახლავე\");var cart=_this.state.cart;var products=_this.state.products.map(function(p){if(cart[p.name]){p.stock=p.stock-cart[p.name].amount;}return p;});_this.setState({products});_this.clearCart();};_this.removeFromCart=function(cartItemId){var cart=_this.state.cart;delete cart[cartItemId];localStorage.setItem(\"cart\",JSON.stringify(cart));_this.setState({cart});};_this.clearCart=function(){var cart={};localStorage.setItem(\"cart\",JSON.stringify(cart));_this.setState({cart});};_this.state={cart:{},products:[]};_this.routerRef=/*#__PURE__*/React.createRef();return _this;}_createClass(RouterComponent,[{key:\"componentDidMount\",value:function componentDidMount(){var products=localStorage.getItem(\"products\");var cart=localStorage.getItem(\"cart\");products=products?JSON.parse(products):data.initProducts;cart=cart?JSON.parse(cart):{};this.setState({products,cart});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Context.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{removeFromCart:this.removeFromCart,addToCart:this.addToCart,clearCart:this.clearCart,checkout:this.checkout})},/*#__PURE__*/React.createElement(Router,{history:history},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(PrivateRoute,{path:\"/\",exact:true,component:Home}),/*#__PURE__*/React.createElement(Route,{path:\"/login\",exact:true,component:Login}),/*#__PURE__*/React.createElement(Route,{path:\"/signup\",exact:true,component:Signup}),/*#__PURE__*/React.createElement(Route,{path:\"/cart\",exact:true,component:Cart}),/*#__PURE__*/React.createElement(Route,{path:\"*\",component:NotFound}))));}}]);return RouterComponent;}(Component);export{RouterComponent as default};","map":{"version":3,"sources":["C:/Users/Saba/Desktop/PlantsWeb/src/router.js"],"names":["React","Component","Switch","Route","Link","Router","Home","Login","Signup","Cart","NotFound","PrivateRoute","history","data","Context","RouterComponent","props","addToCart","cartItem","cart","state","id","amount","product","stock","localStorage","setItem","JSON","stringify","setState","checkout","alert","products","map","p","name","clearCart","removeFromCart","cartItemId","routerRef","createRef","getItem","parse","initProducts"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Switch, Route, Link, Router } from \"react-router-dom\";\nimport Home from \"./pages/home/Home\";\nimport Login from \"./pages/login/login\";\nimport Signup from \"./pages/signup/signup\";\nimport Cart from \"./pages/cart/Cart\"\nimport NotFound from \"./pages/notFound\";\nimport { PrivateRoute } from \"./components/privateRoute\";\nimport history from \"./utils/helpers/history\";\n\n\nimport data from \"./Data\";\nimport Context from \"./Context\";\n\n\nexport default class RouterComponent extends Component {\n      constructor(props) {\n        super(props);\n        this.state = {\n          cart: {},\n          products: []\n        };\n  \n        this.routerRef = React.createRef();\n      }\n    \n      addToCart = cartItem => {\n        let cart = this.state.cart;\n        if (cart[cartItem.id]) {\n          cart[cartItem.id].amount += cartItem.amount;\n        } else {\n          cart[cartItem.id] = cartItem;\n        }\n        if (cart[cartItem.id].amount > cart[cartItem.id].product.stock) {\n          cart[cartItem.id].amount = cart[cartItem.id].product.stock;\n        }\n        localStorage.setItem(\"cart\", JSON.stringify(cart));\n        this.setState({ cart });\n      };\n    \n      checkout = () => {\n        alert(\"აი მოგიტანთ სახლში ახლავე\")\n        const cart = this.state.cart;\n        const products = this.state.products.map(p => {\n          if (cart[p.name]) {\n            p.stock = p.stock - cart[p.name].amount;\n          }\n          return p;\n        });\n        this.setState({ products });\n        this.clearCart();\n      };\n    \n      removeFromCart = cartItemId => {\n        let cart = this.state.cart;\n        delete cart[cartItemId];\n        localStorage.setItem(\"cart\", JSON.stringify(cart));\n        this.setState({ cart });\n      };\n    \n      clearCart = () => {\n        let cart = {};\n        localStorage.setItem(\"cart\", JSON.stringify(cart));\n        this.setState({ cart });\n      };\n    \n      componentDidMount() {\n        let products = localStorage.getItem(\"products\");\n        let cart = localStorage.getItem(\"cart\");\n        products = products ? JSON.parse(products) : data.initProducts;\n        cart = cart ? JSON.parse(cart) : {};\n        this.setState({ products, cart });\n      }\n    \n      render() {\n        return (\n          <Context.Provider\n            value={{\n              ...this.state,\n              removeFromCart: this.removeFromCart,\n              addToCart: this.addToCart,\n              clearCart: this.clearCart,\n              checkout: this.checkout\n            }}\n          >\n            <Router history={history}>\n              <Switch>\n                <PrivateRoute path=\"/\" exact component={Home} />\n                <Route path=\"/login\" exact component={Login} />\n                <Route path=\"/signup\" exact component={Signup} />\n                <Route path=\"/cart\" exact component={Cart} />\n                <Route path=\"*\" component={NotFound} />\n              </Switch>\n            </Router>\n      </Context.Provider>\n  );\n};\n}"]},"metadata":{},"sourceType":"module"}